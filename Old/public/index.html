<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MineBot Web Manager</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <!-- SIDEBAR -->
    <div class="sidebar">
        <h2>Bot Manager</h2>

        <!-- Config Section (Collapsible) -->
        <details open>
            <summary style="cursor:pointer; color: #aaa; margin-bottom:10px;">Global Settings</summary>

            <label>Server IP</label>
            <input type="text" id="host" value="play.dgnetwork.in">

            <label>Version</label>
            <select id="version">
                <option value="1.8.9">1.8.9 (Recommended)</option>
                <option value="1.12.2">1.12.2</option>
                <option value="auto">Auto-Detect</option>
            </select>
        </details>

        <hr style="border:0; border-top:1px solid #444; width:100%; margin:15px 0;">

        <!-- Bot Builder -->
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <h3>My Bots</h3>
            <button id="addBotBtn" style="padding:2px 8px; font-size:12px;">+ Add</button>
        </div>

        <div id="configBotList" class="bot-config-list">
            <!-- Dynamic Rows will go here -->
        </div>

        <button id="startBtn" class="btn-primary" style="width:100%; margin-top:10px;">Start Selected</button>
        <button id="stopBtn" class="btn-danger" style="width:100%; margin-top:5px;">Stop All</button>

        <!-- Command Modal (Hidden) -->
        <div id="cmdModal" class="modal-overlay" style="display:none; align-items:center; justify-content:center;">
            <div style="background:#333; padding:20px; border-radius:6px; width:300px; border:1px solid #555;">
                <h4>Auto-Commands</h4>
                <textarea id="cmdInput"
                    style="width:100%; height:100px; background:#222; color:#fff; border:1px solid #444; margin:10px 0;"></textarea>
                <p style="font-size:11px; color:#aaa; margin-bottom:10px;">Runs 10s after join.</p>
                <div style="display:flex; justify-content:flex-end; gap:10px;">
                    <button onclick="document.getElementById('cmdModal').style.display='none'"
                        class="btn-small">Cancel</button>
                    <button onclick="saveCmds()" class="btn-primary">Save</button>
                </div>
            </div>
        </div>

        <!-- Name Modal (Hidden) -->
        <div id="nameModal" class="modal-overlay" style="display:none; align-items:center; justify-content:center;">
            <div style="background:#333; padding:20px; border-radius:6px; width:250px; border:1px solid #555;">
                <h4>New Bot Name</h4>
                <input type="text" id="newBotName" placeholder="e.g. PvP_Bot_1"
                    style="width:100%; padding:8px; margin:10px 0; background:#222; border:1px solid #444; color:white;">
                <div style="display:flex; justify-content:flex-end; gap:10px;">
                    <button onclick="closeNameModal()" class="btn-small">Cancel</button>
                    <button onclick="confirmAddBot()" class="btn-primary">Create</button>
                </div>
            </div>
        </div>

        <hr style="border:0; border-top:1px solid #444; width:100%; margin:15px 0;">

        <h3 style="margin:0; color:#ddd; font-size:1rem;">Active Bots</h3>
        <div id="botList" class="bot-list">
            <div class="bot-item active" data-bot="Global">
                <span>Global Dashboard</span>
                <div class="bot-status-dot status-online"></div>
            </div>
        </div>
    </div>

    <!-- MAIN DASHBOARD -->
    <div class="main-content">

        <!-- Live Chat Log -->
        <div class="chat-window" id="logContainer">
            <div class="log-entry"><span class="log-text">Waiting for bots...</span></div>
        </div>

        <!-- Control Panel -->
        <div class="control-panel">

            <div class="bot-selector">
                <label>Target Bot</label>
                <select id="targetSelect">
                    <option value="all">All Bots</option>
                </select>
            </div>

            <!-- Movement WASD -->
            <div class="movement-pad">
                <div></div>
                <button class="move-btn" data-action="forward">W</button>
                <div></div>
                <button class="move-btn" data-action="left">A</button>
                <button class="move-btn" data-action="back">S</button>
                <button class="move-btn" data-action="right">D</button>
            </div>

            <div class="action-buttons">
                <button class="move-btn" data-action="jump" style="width: 60px;">JUMP</button>
                <button class="move-btn" data-action="click" style="width: 60px;">CLICK</button>
                <button class="move-btn" onclick="showLastInventory()"
                    style="width: 60px; background: #c6c6c6; color: black;" title="Show last opened GUI">GUI</button>
            </div>

            <!-- Chat Input -->
            <div class="chat-input-area">
                <input type="text" id="chatInput" placeholder="Send chat or command (/gamemode)...">
                <button id="sendChatBtn" class="btn-primary" style="width: 80px; margin-bottom: 10px;">Send</button>
            </div>

        </div>
    </div>

    <!-- Inventory Modal -->
    <div id="inventoryModal" class="modal-overlay">
        <div class="inventory-window">
            <div class="inventory-header">
                <span id="invTitle">Inventory</span>
                <button id="closeInv" style="width: auto; padding: 2px 8px; margin: 0; background: #cc3333;">X</button>
            </div>
            <div class="inventory-grid" id="invGrid">
                <!-- Slots generated by JS -->
            </div>
        </div>
    </div>

    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script src="script.js"></script>
</body>

</html>